(this["webpackJsonpretro-composer"]=this["webpackJsonpretro-composer"]||[]).push([[0],{22:function(n,e,t){n.exports=t.p+"static/media/logo.5ee23392.svg"},26:function(n,e,t){n.exports=t(39)},39:function(n,e,t){"use strict";t.r(e);var a=t(1),o=t(2),r=t(0),c=t(20),i=t.n(c),u=t(25),l=t(6),s=t(15),f=t(10),p=t(8),d=t(21);function m(){var n=Object(a.a)(["\n  color: ",";\n  font-weight: 600;\n  text-decoration: none;\n"]);return m=function(){return n},n}function g(){var n=Object(a.a)(["\n  font-size: 12px;\n  text-align: center;\n  box-shadow: 0 0 5px #000;\n  padding: 2px 0 4px;\n"]);return g=function(){return n},n}var b=Object(o.a)(g()),v=Object(o.a)(m(),"#D9EFF9"),h=function(){return r.createElement("div",{className:b},"Made with"," ",r.createElement("span",{role:"img","aria-label":"love"},"\u2764\ufe0f")," ","by"," ",r.createElement("a",{className:v,rel:"noopener noreferrer",target:"_blank",href:"https://twitter.com/DarkoKukovec"},"@DarkoKukovec"))},x=t(22),j=t.n(x);function O(){var n=Object(a.a)(["\n  height: 32px;\n"]);return O=function(){return n},n}function E(){var n=Object(a.a)(["\n  height: 32px;\n  box-shadow: 0 0 5px #000;\n  padding: 7px 16px;\n  text-align: center;\n"]);return E=function(){return n},n}var w=Object(o.a)(E()),k=Object(o.a)(O()),y=function(){return r.createElement("header",{className:w},r.createElement("img",{className:k,src:j.a,alt:"Retro Composer"}))},N=/(\d+)(\.)?(#)?([abcdefg])([123])|(\d+)(\.)?(-)/;function S(n){return n.split(/\s+/g).map((function(n){return n.match(N)})).filter((function(n){return null!==n})).map((function(n){var e=Object(l.a)(n,9),t=(e[0],e[1]),a=e[2],o=e[3],r=e[4],c=e[5],i=e[6],u=e[7],s=e[8];return t?{duration:parseInt(t,10),extendedLength:Boolean(a),sharp:Boolean(o),tone:"".concat(r).concat(o||""),octave:parseInt(c,10)}:{duration:parseInt(i,10),extendedLength:Boolean(u),rest:Boolean(s)}}))}var C,T=t(33);function D(){var n=Object(a.a)(["\n  width: 50px;\n"]);return D=function(){return n},n}function z(){var n=Object(a.a)(["\n  flex: 1;\n"]);return z=function(){return n},n}function B(){var n=Object(a.a)(["\n  font-size: 20px;\n  padding: 4px;\n  display: flex;\n  line-height: 24px;\n"]);return B=function(){return n},n}var W=Object(o.a)(B()),A=Object(o.a)(z()),I=Object(o.a)(D()),L=function(n){var e=n.notes,t=n.tempo,a=n.onTempoChange,o=r.useMemo((function(){return e.length?function(n,e){T.Transport.bpm.value=e,C&&C.stop();var t=(new T.Synth).toMaster(),a=0,o=[];n.forEach((function(n){var e=T.Time("".concat(n.duration,"n"))*(n.extendedLength?1.5:1);if("tone"in n){var t="".concat(n.tone.toUpperCase()).concat(2+n.octave);o.push([a,[t,e]])}a+=e}));var r=C=new T.Part((function(n,e){var a=Object(l.a)(e,2),o=a[0],r=a[1];t.triggerAttackRelease(o,r,n)}),o);return r.loop=!1,r.playbackRate=1,T.Transport.start(),r}(e,t):null}),[e,t]);r.useEffect((function(){return function(){o&&o.stop()}}),[o]);return r.createElement("div",{className:W},r.createElement("button",{type:"button",onClick:function(){o&&(o.stop(),o.start())}},"Play"),r.createElement("button",{type:"button",onClick:function(){o&&o.stop()}},"Stop"),r.createElement("div",{className:A}),"Tempo:",r.createElement("input",{className:I,type:"number",value:t,onChange:function(n){var e=parseInt(n.target.value,10)||100;a(e)}}))};function R(){var n=Object(a.a)(["\n  flex: 1;\n  font-size: 24px;\n  text-align: center;\n"]);return R=function(){return n},n}function U(){var n=Object(a.a)(["\n  display: flex;\n  padding: 8px 4px 0;\n  line-height: 24px;\n"]);return U=function(){return n},n}function F(){var n=Object(a.a)(["\n  width: calc(100% - 32px);\n  font-size: 24px;\n  padding: 16px;\n  flex: 1;\n"]);return F=function(){return n},n}function J(){var n=Object(a.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return J=function(){return n},n}var P=Object(o.a)(J()),V=Object(o.a)(F()),M=Object(o.a)(U()),K=Object(o.a)(R()),Q=function(n){var e=n.song,t=n.onSave,a=n.history,o=r.useState(e.notes||[]),c=Object(l.a)(o,2),i=c[0],u=c[1],s=r.useState(e.name||""),f=Object(l.a)(s,2),d=f[0],m=f[1],g=r.useState(e.tempo||100),b=Object(l.a)(g,2),v=b[0],h=b[1],x=Object(p.e)(),j=(e.notes||[]).map((function(n){return"tone"in n?"".concat(n.duration).concat(n.extendedLength?".":"").concat(n.sharp?"#":"").concat(n.tone.replace("#","")).concat(n.octave):"".concat(n.duration).concat(n.extendedLength?".":"","-")})).join(" ");return r.createElement("div",{className:P},r.createElement("div",{className:M},r.createElement("button",{type:"button",onClick:function(){a.goBack()}},"Back"),r.createElement("input",{className:K,value:d,onChange:function(n){return m(n.target.value)},placeholder:"Song name"}),r.createElement("button",{type:"button",onClick:function(){var n=t(e,{name:d,tempo:v,notes:i});n!==e.id&&x.replace("/".concat(n))}},"Save")),r.createElement("textarea",{className:V,defaultValue:j,onChange:function(n){return u(S(n.target.value))}}),r.createElement(L,{notes:i,onTempoChange:function(n){return h(n)},tempo:v}))};function $(){var n=Object(a.a)(["\n  font-size: 24px;\n  cursor: pointer;\n  padding: 6px;\n  text-decoration: none;\n  display: block;\n  color: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"]);return $=function(){return n},n}function _(){var n=Object(a.a)(["\n  margin: 0;\n  padding: 4px;\n  list-style: none;\n"]);return _=function(){return n},n}var q=Object(o.a)(_()),G=Object(o.a)($(),"#242D23","#242D23","#79a682"),H=function(n){var e=n.songs;return r.createElement("ul",{className:q},e.map((function(n){return r.createElement("li",{key:n.name},r.createElement(f.b,{className:G,to:"/".concat(n.id)},n.name))})),r.createElement("li",null,r.createElement(f.b,{className:G,to:"/new"},"New song")))};function X(){var n=Object(a.a)(["\n  flex: 1;\n  background: ",";\n  color: ",";\n  font-size: 20px;\n  font-family: VT323, monospace;\n"]);return X=function(){return n},n}function Y(){var n=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return Y=function(){return n},n}var Z=Object(o.a)(Y()),nn=Object(o.a)(X(),"#79a682","#242D23"),en=JSON.parse(localStorage.getItem("saved-songs")||"null")||[{id:"sample-1",name:"Europe - The final countdown",tempo:125,notes:"4- 8- 16b2 16a2 4b2 4e2 4- 8- 16c3 16b2 8c3 8b2 4a2 4- 8- 16c3 16b2 4c3 4e2 4- 8- 16a2 16g2 8a2 8g2 8#f2 8a2 4g2 8- 16#f2 16g2 4a2 8- 16g2 16a2 8b2 8a2 8g2 8#f2 4e2 4c3 2b2 4- 16b2 16c3 16b2 16a2 1b2"},{id:"sample-2",name:"A-ha - Take on me",tempo:100,notes:"8- 16#a1 16#a1 16#a1 8#f1 8#d1 8#g1 8#g1 16#g1 16c2 16c2 16#c2 16#d2 16#c2 16#c2 16#c2 8#g1 8#f1 8#a1 8#a1 16#a1 16#g1 16#g1 16#a1 16#g1 16#a1 16#a1 16#a1 8#f1 8#d1 8#g1 8#g1 16#g1 16c2 16c2 16#c2 16#d2 16#c2 16#c2 16#c2 8#g1 8#f1 8#a1 8#a1"}].map((function(n){return Object(s.a)({},n,{notes:S(n.notes)})})),tn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function an(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}function on(){var n=Object(a.a)(["\n  html, body {\n    margin: 0;\n    height: 100%;\n    background: ",";\n  }\n\n  #root {\n    height: 100%;\n    font-family: Quicksand, sans-serif;\n    font-size: 12px;\n    font-weight: 400;\n    color: ",";\n  }\n\n  button {\n    appearence: none;\n    border: 1px solid ",";\n    background: transparent;\n    font-family: VT323, monospace;\n    font-size: 20px;\n    margin: 0 4px;\n    outline: none;\n    color: ",";\n    cursor: pointer;\n  \n    &:hover {\n      background: ",";\n      color: ",";\n    }\n  }\n\n  input,\n  textarea {\n    border: none;\n    background: transparent;\n    font-family: VT323, monospace;\n    font-size: 20px;\n    color: ",";\n    outline: none;\n  }\n"]);return on=function(){return n},n}Object(o.b)(on(),"#2B303D","#D9EFF9","#242D23","#242D23","#242D23","#79a682","#242D23"),i.a.render(r.createElement((function(){var n=r.useState(en),e=Object(l.a)(n,2),t=e[0],a=e[1],o=function(n,e){if(t.includes(n))return Object.assign(n,e),n.id;var o=Object(d.v1)(),r=[].concat(Object(u.a)(t),[Object(s.a)({name:"Undefined"},e,{id:o})]);return localStorage.setItem("saved-songs",JSON.stringify(r)),a(r),o};return r.createElement("div",{className:Z},r.createElement(y,null),r.createElement("main",{className:nn},r.createElement(f.a,null,r.createElement(p.a,{path:"/",exact:!0,render:function(){return r.createElement(H,{songs:t})}}),r.createElement(p.a,{path:"/:id",render:function(n){var e=t.find((function(e){return e.id===n.match.params.id}))||{};return r.createElement(Q,Object.assign({},n,{song:e,onSave:o}))}}))),r.createElement(h,null))}),null),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");tn?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):an(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):an(e,n)}))}}()}},[[26,1,2]]]);
//# sourceMappingURL=main.8026d79e.chunk.js.map